<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Patient Management</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; font-family:Segoe UI, Arial; background:#020617; color:#e5e7eb; }
.top-bar { display:flex; justify-content:space-between; align-items:center; padding:18px 30px; background:rgba(2,6,23,.8); border-bottom:1px solid rgba(255,255,255,.15); }
.top-bar h2 { margin:0; color:#0ea5e9; }
.top-bar button { padding:8px 15px; background:#0ea5e9; border:none; border-radius:8px; cursor:pointer; color:#fff; font-weight:600; }
.top-bar button:hover { opacity:.85; }
table { width:90%; margin:20px auto; border-collapse:collapse; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.15); border-radius:12px; overflow:hidden; }
th, td { padding:12px 15px; border-bottom:1px solid rgba(255,255,255,.15); text-align:center; }
th { background:rgba(0,0,0,.2); color:#0ea5e9; }
tr:hover { background:rgba(0,0,0,.1); cursor:pointer; }
</style>
</head>
<body>

<div class="top-bar">
  <h2>Patient Management</h2>
  <button onclick="location.href='admin.html'">‚Üê Back to Dashboard</button>
</div>

<table id="patientsTable">
  <thead>
    <tr>
      <th>Patient Name</th>
      <th>Device</th>
      <th>Last Check</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
async function loadPatients() {
  const tbody = document.querySelector("#patientsTable tbody");
  tbody.innerHTML = '';
  try {
    const res = await fetch('/api/patients');
    const patients = await res.json();
    patients.forEach(p => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${p.name}</td><td>${p.device}</td><td>${new Date(p.last_check).toLocaleString()}</td>`;
      tbody.appendChild(tr);
    });
  } catch(e) { console.error(e); }
}
loadPatients();
</script>
</body>
</html>
